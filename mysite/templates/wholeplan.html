<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.4.4.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){

	$(window).load(function(){
		$("#req").hide();
		$("#det").hide();
	});

	$("#sel").change(function(){
		$("#req").show();
		$("#det").show();
		$("#req").css("background-color", "lightgray");
		$("[id=detail]").hide();
	});

	$("#req").click(function(){
		$("[id=detail]").hide();
		$("[id=required]").show();
		$("#det").css("background-color", "white");
		$(this).css("background-color", "lightgray");
	});

	$("#det").click(function(){
		$("[id=required]").hide();
		$("[id=detail]").show();
		$("#req").css("background-color", "white");
		$(this).css("background-color", "lightgray");
	});

});

</script>
<script type="text/javascript">
	function loadXMLDoc()
	{
	//alert('This is just a trigger message!');
	if (window.XMLHttpRequest)
		{// code for IE7+, Firefox, Chrome, Opera, Safari
		xmlhttp=new XMLHttpRequest();
		}
	else
		{// code for IE6, IE5
		xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
		}
	xmlhttp.onreadystatechange=function()
		{
		if (xmlhttp.readyState==4 && xmlhttp.status==200)
			{
			document.getElementById("now").innerHTML=xmlhttp.responseText;
			}
		}
	xmlhttp.open("GET","/now/",true);
	xmlhttp.send();

	setTimeout("loadXMLDoc()", 1000);
	}

	function showPlan(str)
	{
	//alert(str);
	if (str=="")
		{
		document.getElementById("txtHint").innerHTML="";
		return;
		}
	if (window.XMLHttpRequest)
		{// code for IE7+, Firefox, Chrome, Opera, Safari
		xmlhttp=new XMLHttpRequest();
		}
	else
		{// code for IE6, IE5
		xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
		}
	xmlhttp.onreadystatechange=function()
		{
		if (xmlhttp.readyState==4 && xmlhttp.status==200)
			{
			document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
			}
		}
	xmlhttp.open("GET", "/showwhole/?opdate="+str ,true);
	xmlhttp.send();
	}

</script>

</head>

<body onload='javascript:loadXMLDoc()'>

	<table>
		<tr>
			<td class="lft"><a href="/index/"><img border="0" height="100px" src="image/back.png"></a></td>	
			<td class="rght"><a href="/wholeplan/"><img border="0" height="100px" src="image/refresh2.png"></a></td>
		</tr>
	</table>
	
<table><tr><td><div class='lft'>{% now "Y-m-d" %}</div></td><td><div id='now'></div></td></tr><table>

<table>
	<tr>
		<td class="lft">
			<form>
				<select id="sel" name="opdate" onchange="showPlan(this.value)">
				<option value="">Select date to show plan:</option>
				{% for date in datelist %}
				<option value="{{ date }}">{{ date }}</option>
				{% endfor %}
				</select>
			</form>
		</td>
		<td></td>
		<td id="req" style="cursor:pointer;">Required</td>
		<td id="det" style="cursor:pointer;">Detail</td>
	</tr>
</table>

<div id="txtHint"><b>Clamplift plan will be shown here.</b></div>

</body>
</html>
