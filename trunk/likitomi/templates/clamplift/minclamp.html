<html>
<head>

<link rel="stylesheet" type="text/css" href="css/smoothness/jquery-ui-1.8.10.custom.css" />
<link rel="stylesheet" type="text/css" href="css/mystyle.css" />
<style type="text/css">
td
{
border: 0px solid black;
text-align:center;
}

p{font-size:150%;}

.label
{
text-align:right;
color:dimgray;
}

.var
{
color:black;
text-align:center;
font-weight:bold;
}

#big{font-size:200%;}

/* For overlay */
.locbutton
{
background-color:gray;
border:2px solid silver;
text-align:center;
cursor:pointer;
width:10%;
}

.minloc
{
background-color:gray;
border:2px solid silver;
text-align:center;
cursor:pointer;
font-size:50%;
}

.gridbutton
{
height:50px;
width:50px;
border:2px solid silver;
background-color:dimgray;
text-align:center;
cursor:pointer;
}

.confirm
{
position:absolute;
bottom:10px;
height:50px;
width:80px;
border:2px solid silver;
background-color:dimgray;
text-align:center;
}

.lanebutton
{
position:absolute; 
height:25px;
width:100px;
border:2px solid silver;
background-color:mediumaquamarine;
text-align:center;
}

.posbutton
{
position:absolute; 
height:50px;
width:50px;
border:2px solid silver;
background-color:slategray;
text-align:center;
}

#overlay {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-color: black;
filter:alpha(opacity=50);
-moz-opacity:0.5;
-khtml-opacity: 0.5;
opacity: 0.5;
z-index: 10000;
}
</style>

<script type="text/javascript" src="javascript/jquery.js"></script>
<script type="text/javascript" src="javascript/clamplift.js"></script>
<script type="text/javascript">
$(document).ready(function(){
	$(window).load(function minClamp(){
		$("#minclamp").load("/minclamp/");
		setTimeout(minClamp, 2000);
	});
});
</script>
<script type="text/javascript">
function submit()
{
	document.getElementById("frm1").submit();
}

function undoSubmit()
{
	document.getElementById("frm2").submit();
}

function changeLocDown()
{
	document.getElementById("lane").value = '{{lane}}';
	document.getElementById("pos").value = '{{downpos}}';
	document.getElementById("frm3").submit();
}

function changeLocUp()
{
	document.getElementById("lane").value = '{{lane}}';
	document.getElementById("pos").value = '{{uppos}}';
	document.getElementById("frm3").submit();
}

function changeLocOpp()
{
	document.getElementById("lane").value = '{{opplane}}';
	document.getElementById("pos").value = '{{position}}';
	document.getElementById("frm3").submit();
}

function changeLocOppDown()
{
	document.getElementById("lane").value = '{{opplane}}';
	document.getElementById("pos").value = '{{downpos}}';
	document.getElementById("frm3").submit();
}

function changeLocOppUp()
{
	document.getElementById("lane").value = '{{opplane}}';
	document.getElementById("pos").value = '{{uppos}}';
	document.getElementById("frm3").submit();
}

function changeLocLeft()
{
	document.getElementById("frm4").submit();
}

function changeLocRight()
{
	document.getElementById("frm5").submit();
}

function otherLoc(){
	var overlay = jQuery('<div id="overlay"> </div>');
	overlay.appendTo(top.document.body);

	var height = top.document.documentElement.clientHeight + top.document.documentElement.scrollTop;
	var width = top.document.documentElement.clientWidth + top.document.documentElement.scrollLeft;
	var ftop = (height/2)-(400/2)+'px';
	var fleft = (width/2)-(300/2)+'px';

	var bodyslam = '\
	<p class="txt">Please enter lane and position.</p>\
	<center><b>Lane >> </b><input id="ilane" class="inp" size="1" maxlength="1" value="{{lane}}" /><b> - </b><input id="ipos" class="inp" size="2" maxlength="2" value="{{position}}" /><b> << Position</b></center>\
	<table><tr><td>\
		<table><tr><td class="lanebtn" onclick="document.getElementById(\'ilane\').value=\'H\';">H</td></tr><tr><td class="space"></td></tr>\
		<tr><td class="lanebtn" onclick="document.getElementById(\'ilane\').value=\'G\';">G</td></tr>\
		<tr><td class="lanebtn" onclick="document.getElementById(\'ilane\').value=\'F\';">F</td></tr><tr><td class="space"></td></tr>\
		<tr><td class="lanebtn" onclick="document.getElementById(\'ilane\').value=\'E\';">E</td></tr>\
		<tr><td class="lanebtn" onclick="document.getElementById(\'ilane\').value=\'D\';">D</td></tr><tr><td class="space"></td></tr>\
		<tr><td class="lanebtn" onclick="document.getElementById(\'ilane\').value=\'C\';">C</td></tr>\
		<tr><td class="lanebtn" onclick="document.getElementById(\'ilane\').value=\'B\';">B</td></tr><tr><td class="space"></td></tr>\
		<tr><td class="lanebtn" onclick="document.getElementById(\'ilane\').value=\'A\';">A</td></tr></table>\
	</td><td>\
		\
	</td></tr></table>\
	';

	var layer = jQuery('<div id="layer" style="top:'+ftop+'; left:'+fleft+';">'+bodyslam+'</div>');
	layer.appendTo(top.document.body);

//	var mes = jQuery('<p class="txt">Please enter lane and position.</p>');
//	mes.appendTo($("#layer", top.document));
}

function otherLoc2()
{
	var l = document.createElement('b');
	l.innerHTML = 'Lane >'.fontsize(4);
	cen.appendChild(l);

	var ilane = document.createElement('input');
	ilane.style.fontSize = '150%';
	ilane.style.color = 'black';
	ilane.style.textAlign = 'center';
	ilane.size = '1';
	ilane.maxLength = '1';
	ilane.type = 'text';
	ilane.id = 'ilane';
	ilane.value = '{{lane}}';
	cen.appendChild(ilane);

	var d = document.createElement('b');
	d.innerHTML = '-'.fontsize(4);
	cen.appendChild(d);

	var iposition = document.createElement('input');
	iposition.style.fontSize = '150%';
	iposition.style.color = 'black';
	iposition.style.textAlign = 'center';
	iposition.maxLength = '1';
	iposition.size = '1';
	iposition.type = 'text';
	iposition.id = 'iposition';
	iposition.value = '{{position}}';
	cen.appendChild(iposition);

	var p = document.createElement('b');
	p.innerHTML = '< Position'.fontsize(4);
	cen.appendChild(p);

	var h = document.createElement('a');
	h.style.top = '90px';
	h.style.left = '50px'; 
	h.style.position = 'absolute';
	h.style.height = '25px';
	h.style.width = '100px';
	h.style.border = '2px solid silver';
	h.style.backgroundColor = 'mediumaquamarine';
	h.style.textAlign = 'center';
	h.innerHTML = "H".fontsize(4).bold();
	h.onclick = function()
	{
		alert("H");
		document.getElementById('ilane').value = 'H';
	}
	div.appendChild(h);

	var g = document.createElement('a');
	g.style.top = '130px';
	g.style.left = '50px'; 
	g.style.position = 'absolute';
	g.style.height = '25px';
	g.style.width = '100px';
	g.style.border = '2px solid silver';
	g.style.backgroundColor = 'mediumaquamarine';
	g.style.textAlign = 'center';
	g.innerHTML = "G".fontsize(4).bold();
	g.onclick = function()
	{
		document.getElementById('ilane').value = 'G';
	}
	div.appendChild(g);

	var f = document.createElement('a');
	f.style.top = '160px';
	f.style.left = '50px'; 
	f.innerHTML = "<table height='100%'><tr><td style='cursor:pointer' align='center'>"+"F".fontsize(4).bold()+"</td></tr></table>";
	f.onclick = function()
	{
		document.getElementById('ilane').value = 'F';
	}
	div.appendChild(f);

	$("a").addClass("lanebutton");

	var e = document.createElement('a');
	e.id = 'lanebutton';
	e.style.top = '200px';
	e.style.left = '50px'; 
	e.innerHTML = "<table height='100%'><tr><td style='cursor:pointer' align='center'>"+"E".fontsize(4).bold()+"</td></tr></table>";
	e.onclick = function()
	{
		document.getElementById('ilane').value = 'E';
	}
	div.appendChild(e);

	var d = document.createElement('a');
	d.id = 'lanebutton';
	d.style.top = '230px';
	d.style.left = '50px'; 
	d.innerHTML = "<table height='100%'><tr><td style='cursor:pointer' align='center'>"+"D".fontsize(4).bold()+"</td></tr></table>";
	d.onclick = function()
	{
		document.getElementById('ilane').value = 'D';
	}
	div.appendChild(d);

	var c = document.createElement('a');
	c.id = 'lanebutton';
	c.style.top = '270px';
	c.style.left = '50px'; 
	c.innerHTML = "<table height='100%'><tr><td style='cursor:pointer' align='center'>"+"C".fontsize(4).bold()+"</td></tr></table>";
	c.onclick = function()
	{
		document.getElementById('ilane').value = 'C';
	}
	div.appendChild(c);

	var b = document.createElement('a');
	b.id = 'lanebutton';
	b.style.top = '300px';
	b.style.left = '50px'; 
	b.innerHTML = "<table height='100%'><tr><td style='cursor:pointer' align='center'>"+"B".fontsize(4).bold()+"</td></tr></table>";
	b.onclick = function()
	{
		document.getElementById('ilane').value = 'B';
	}
	div.appendChild(b);

	var a = document.createElement('a');
	a.id = 'lanebutton';
	a.style.top = '340px';
	a.style.left = '50px';
	a.innerHTML = "<table height='100%'><tr><td style='cursor:pointer' align='center'>"+"A".fontsize(4).bold()+"</td></tr></table>";
	a.onclick = function()
	{
		document.getElementById('ilane').value = 'A';
	}
	div.appendChild(a);

	var trig = 0;

	var one = document.createElement('a');
	one.id = 'posbutton';
	one.style.top = '90px';
	one.style.left = '200px'; 
	one.innerHTML = "<table height='100%'><tr><td style='cursor:pointer' align='center'>"+"1".fontsize(6).bold()+"</td></tr></table>";
	one.onclick = function()
	{
		if (trig == 0)
		{
			document.getElementById('iposition').value = '';
			trig = 1;
		}
		if (document.getElementById('iposition').value.length < 2 && trig == 1)
		document.getElementById('iposition').value += '1';
	}
	div.appendChild(one);

	var two = document.createElement('a');
	two.id = 'posbutton';
	two.style.top = '90px';
	two.style.left = '280px'; 
	two.innerHTML = "<table height='100%'><tr><td style='cursor:pointer' align='center'>"+"2".fontsize(6).bold()+"</td></tr></table>";
	two.onclick = function()
	{
		if (trig == 0)
		{
			document.getElementById('iposition').value = '';
			trig = 1;
		}
		if (document.getElementById('iposition').value.length < 2 && trig == 1)
		document.getElementById('iposition').value += '2';
	}
	div.appendChild(two);

	var three = document.createElement('a');
	three.id = 'posbutton';
	three.style.top = '90px';
	three.style.left = '360px'; 
	three.innerHTML = "<table height='100%'><tr><td style='cursor:pointer' align='center'>"+"3".fontsize(6).bold()+"</td></tr></table>";
	three.onclick = function()
	{
		if (trig == 0)
		{
			document.getElementById('iposition').value = '';
			trig = 1;
		}
		if (document.getElementById('iposition').value.length < 2 && trig == 1)
		document.getElementById('iposition').value += '3';
	}
	div.appendChild(three);

	var four = document.createElement('a');
	four.id = 'posbutton';
	four.style.top = '160px';
	four.style.left = '200px'; 
	four.innerHTML = "<table height='100%'><tr><td style='cursor:pointer' align='center'>"+"4".fontsize(6).bold()+"</td></tr></table>";
	four.onclick = function()
	{
		if (trig == 0)
		{
			document.getElementById('iposition').value = '';
			trig = 1;
		}
		if (document.getElementById('iposition').value.length < 2 && trig == 1)
		document.getElementById('iposition').value += '4';
	}
	div.appendChild(four);

	var five = document.createElement('a');
	five.id = 'posbutton';
	five.style.top = '160px';
	five.style.left = '280px'; 
	five.innerHTML = "<table height='100%'><tr><td style='cursor:pointer' align='center'>"+"5".fontsize(6).bold()+"</td></tr></table>";
	five.onclick = function()
	{
		if (trig == 0)
		{
			document.getElementById('iposition').value = '';
			trig = 1;
		}
		if (document.getElementById('iposition').value.length < 2 && trig == 1)
		document.getElementById('iposition').value += '5';
	}
	div.appendChild(five);

	var six = document.createElement('a');
	six.id = 'posbutton';
	six.style.top = '160px';
	six.style.left = '360px'; 
	six.innerHTML = "<table height='100%'><tr><td style='cursor:pointer' align='center'>"+"6".fontsize(6).bold()+"</td></tr></table>";
	six.onclick = function()
	{
		if (trig == 0)
		{
			document.getElementById('iposition').value = '';
			trig = 1;
		}
		if (document.getElementById('iposition').value.length < 2 && trig == 1)
		document.getElementById('iposition').value += '6';
	}
	div.appendChild(six);

	var seven = document.createElement('a');
	seven.id = 'posbutton';
	seven.style.top = '230px';
	seven.style.left = '200px'; 
	seven.innerHTML = "<table height='100%'><tr><td style='cursor:pointer' align='center'>"+"7".fontsize(6).bold()+"</td></tr></table>";
	seven.onclick = function()
	{
		if (trig == 0)
		{
			document.getElementById('iposition').value = '';
			trig = 1;
		}
		if (document.getElementById('iposition').value.length < 2 && trig == 1)
		document.getElementById('iposition').value += '7';
	}
	div.appendChild(seven);

	var eight = document.createElement('a');
	eight.id = 'posbutton';
	eight.style.top = '230px';
	eight.style.left = '280px'; 
	eight.innerHTML = "<table height='100%'><tr><td style='cursor:pointer' align='center'>"+"8".fontsize(6).bold()+"</td></tr></table>";
	eight.onclick = function()
	{
		if (trig == 0)
		{
			document.getElementById('iposition').value = '';
			trig = 1;
		}
		if (document.getElementById('iposition').value.length < 2 && trig == 1)
		document.getElementById('iposition').value += '8';
	}
	div.appendChild(eight);

	var nine = document.createElement('a');
	nine.id = 'posbutton';
	nine.style.top = '230px';
	nine.style.left = '360px'; 
	nine.innerHTML = "<table height='100%'><tr><td style='cursor:pointer' align='center'>"+"9".fontsize(6).bold()+"</td></tr></table>";
	nine.onclick = function()
	{
		if (trig == 0)
		{
			document.getElementById('iposition').value = '';
			trig = 1;
		}
		if (document.getElementById('iposition').value.length < 2 && trig == 1)
		document.getElementById('iposition').value += '9';
	}
	div.appendChild(nine);

	var clr = document.createElement('a');
	clr.id = 'posbutton';
	clr.style.top = '300px';
	clr.style.left = '200px'; 
	clr.innerHTML = "<table height='100%'><tr><td style='cursor:pointer' align='center'>"+"clr".fontsize(5).bold()+"</td></tr></table>";
	clr.onclick = function()
	{
		document.getElementById('iposition').value = '';
	}
	div.appendChild(clr);

	var zero = document.createElement('a');
	zero.id = 'posbutton';
	zero.style.top = '300px';
	zero.style.left = '280px'; 
	zero.innerHTML = "<table height='100%'><tr><td style='cursor:pointer' align='center'>"+"0".fontsize(6).bold()+"</td></tr></table>";
	zero.onclick = function()
	{
		if (trig == 0)
		{
			document.getElementById('iposition').value = '';
			trig = 1;
		}
		if (document.getElementById('iposition').value != '' && document.getElementById('iposition').value.length < 2 && trig == 1)
		document.getElementById('iposition').value += '0';
	}
	div.appendChild(zero);

	var ok = document.createElement('a');
	ok.id = 'confirm';
	ok.style.left = '70px'; 
	ok.innerHTML = "<table height='100%'><tr><td style='cursor:pointer' align='center'>"+"OK".fontsize(5).bold()+"</td></tr></table>";
	//ok.href = 'javascript:void(0)';
	ok.onclick = function() 
	{
		var lanebox = document.getElementById('ilane').value;
		var posbox = document.getElementById('iposition').value;
		document.getElementById("lane").value = lanebox;
		document.getElementById("pos").value = posbox;
		document.getElementById("frm3").submit();
		document.body.removeChild(document.getElementById('layer'));
		document.body.removeChild(document.getElementById('box'));
	}
	div.appendChild(ok);

	var cancel = document.createElement('a');
	cancel.id = 'confirm';
	cancel.style.right = '80px'; 
	cancel.innerHTML = "<table height='100%'><tr><td style='cursor:pointer' align='center'>"+"Cancel".fontsize(4).bold()+"</td></tr></table>";
	//cancel.href = 'javascript:void(0)';
	cancel.onclick = function() 
	{
		document.body.removeChild(document.getElementById('layer'));
		document.body.removeChild(document.getElementById('box'));
	}
	div.appendChild(cancel);
}
</script>
</head>
<body>
	<div id="minclamp">
	<input id="cpcode" type="hidden" value="{{ paper_code }}" />
	<input id="cwidth" type="hidden" value="{{ size }}" />
	<input id="lane" type="hidden" value="{{ lane }}" />
	<input id="position" type="hidden" value="{{ position }}" />
	<input id="atlane" type="hidden" value="{{ atlane }}" />
	<input id="atposition" type="hidden" value="{{ atposition }}" />
	<input id="realtag" type="hidden" value="{{ realtag }}" />
	{% if realtag %}
	<table style="width:100%;">
		<tr>
			<td><p class="label">ID: </p></td><td><p class="var">{{ realtag }}</p></td>
			<td><p class="label">P.Code: </p></td><td><p class="var" id="big">{{ paper_code }}</p></td>
			<td style="text-align:center;" rowspan="2">
				{% if atlocation == "Scale" and undo_btn != "" %}<a href="javascript:undoSubmit()"><img border="0" height="50px" src="images/clamplift/undo.png"></a>{% endif %}
				{% if atlocation == "Scale" %}<a href="javascript:otherLoc()"><img border="0" height="50px" src="images/clamplift/changeloc.png"></a>{% endif %}
			</td>
			<td rowspan="2"><p class="label">Weight: </p></td><td rowspan="2"><p class="var">{{ actual_wt }}</p></td>
			{% if atlocation == "Scale" and actual_wt > temp_weight %}
			<td  rowspan="2" style="text-align:center;">>>></td>
			<td rowspan="2"><p class="var">{{ temp_weight }}</p></td>
			{% endif %}
			<td rowspan="2"><p class="unit">kgs.</p></td>
			{% if atlocation == "Scale" and actual_wt > temp_weight %}<td style="text-align:center;" rowspan="2"><a href="javascript:submit()"><img border="0" height="50px" src="images/clamplift/update.png"></a></td>{% endif %}
			{% if atlocation == "Scale" %}<td style="text-align:center;" rowspan="2"><a href="javascript:weightInput()"><img border="0" height="50px" src="images/clamplift/manual.png"></a></td>{% endif %}
			<td rowspan="2" style="text-align:right;"><img src="images/clamplift/legend.png"></td>
		</tr>
		<tr>
			<td><p class="label">Size: </p></td><td><p class="var">{{ size }}</p></td>
			<td><p class="label">Loc.:</p></td><td><p class="var">{{lane}}-{{position}}</p></td>
		</tr>
	</table>
	{% endif %}

	<form id="frm1" action="/minclamp/update/" method="get">
		<input type="hidden" value="{{ realtag }}" name="realtag" />
		<input type="hidden" value="{{ actual_wt }}" name="actual_wt" />
		<input type="hidden" value="{{ temp_weight }}" name="temp_weight" />
	</form>

	<form id="frm2" action="/minclamp/undo/" method="get">
		<input type="hidden" value="{{ realtag }}" name="realtag" />
	</form>

	<form id="frm3" action="/minclamp/changeloc/" method="get">
		<input type="hidden" value="{{ realtag }}" name="realtag" />
		<input id="lane" type="hidden" value="{{ lane }}" name="lane" />
		<input id="pos" type="hidden" value="{{ position }}" name="pos" />
	</form>

	<form id="frm4" action="/minclamp/changeloc/" method="get">
		<input type="hidden" value="{{ realtag }}" name="realtag" />
		<input type="hidden" value="{{ leftlane }}" name="lane" />
		<input type="hidden" value="{{ atposition }}" name="pos" />
	</form>

	<form id="frm5" action="/minclamp/changeloc/" method="get">
		<input type="hidden" value="{{ realtag }}" name="realtag" />
		<input type="hidden" value="{{ rightlane }}" name="lane" />
		<input type="hidden" value="{{ atposition }}" name="pos" />
	</form>
	</div>
</body>
</html>
