<html>
<head>

<link rel="stylesheet" type="text/css" href="css/plan.css" />

<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">
$(document).ready(function(){

	$("#search").click(function(){
		var scode = $("#scode").val();
		var swidth = $("#swidth").val();
		var loss = $("#loss").val();
		$("#invent").load("/inventory/?pcode="+scode+"&width="+swidth+"&loss="+loss);
	});

});
</script>
<script src="js/jquery_reapply.js" type="text/javascript"></script>
</head>

<body>
<div id="invent">
<input id="loss" value="{{ loss }}" type="hidden" />
<table><tr>
	<td style="text-align:left; border:0px;">{{ pcode }} >>> {{ width }}"</td>
	<td style="text-align:right; border:0px; width:0px;" valign="middle">
		<form>
			<select id="scode">
			<option value="">Select paper code:</option>
			{% for paper_code in scode %}
			<option value="{{ paper_code }}">{{ paper_code }}</option>
			{% endfor %}
			</select>
		</form>
	</td>
	<td style="text-align:left; border:0px; width:0px; vertical-align:middle;">
		<form valign="middle" style="verical-align:middle;">
			<select id="swidth">
			<option value="">Select paper width:</option>
			{% for width in swidth %}
			<option value="{{ width }}">{{ width }}</option>
			{% endfor %}
			</select>
		</form>
	</td>
	<td valign="top" style="width:0px; border:0px;">
		<button id="search">Search</button>
	</td>
</tr></table>

<!--{{qidlist}}<br />-->
<!--{{maplist}}<br />-->
<!--{{lanelist}}<br />-->
<!--{{poslist}}-->

<!--query: {{ query }}<br />-->
<!--ls: {{ ls }}<br />-->
<!--ridlist: {{ ridlist }}<br />-->
<!--elist: {{ elist }}<br />-->
<!--delist: {{ delist }}<br />-->
<!--wlist: {{ wlist }}<br />
-->

<!--Map List: {{ maplist }}<br />-->
<!--String List: {{ strlist }}<br />-->
<!--Size List: {{ sizelist }}<br />-->
<table style="height:80%">
<tr>
<td class="top" style="width:10%; border:0px; vertical-align:middle;">

<table>
	<tr>
		<th>ID</th>
		<th>kgs</th>
	</tr>
	{% for id, w in delist %}
	<tr>
		<td>{{ id }}</td>
		<td>{{ w }}</td>
	</tr>
	{% endfor %}
</table>

</td>
<td style="width:90%; border:0px;">
<!--Map list: {{ mstr }}<br />-->
<!--Weight list: {{ wlist }}<br />-->
<!--Initial weight: {{ initial_weight }}<br />-->
<!--+Loss weight: {{ loss }}<br />-->
<!--mquery: {{ mquery }}<br />-->
<!--posb: {{ posb }}<br />-->
<!--index: {{ ind }}<br />-->

{% load listfortag %}
{#{% for pos in posb %}{% if pos %}{% if "'B', "|add:pos in mstr %}{{ wlist|listfortag:ridlist|stringformat:"s"|cut:"]"|add:", '"|add:'B'|add:pos|add:"']" }}{% endif %}{% endif %}{% endfor %}#}
<table>
	<tr><td class="map"></td>{% for pos in posall %}<td class="map" width='1%'>{{ pos }}</td>{% endfor %}</tr>

	<tr><td class="map">A</td>
		{% for pos in posa %}
			{% if pos %}
				{% if "'A', "|add:pos in mstr %}
						{% if pos == initial_weight or pos >= loss or pos >= 700 %}
							<td class="green">{{ pos }}</td>
						{% endif %}
						{% if 400 <= pos and pos < 700 %}
							<td class="blue">{{ pos }}</td>
						{% endif %}
						{% if 100 <= pos and pos < 400 %}
							<td class="yellow">{{ pos }}</td>
						{% endif %}
						{% if pos < 100 %}
							<td class="red">{{ pos }}</td>
						{% endif %}
				{% else %}
					<td class="gray"></td>
				{% endif %}
			{% else %}
				<td></td>
			{% endif %}
		{% endfor %}
	<td class="map">A</td></tr>

	<tr><td class="map">|</td>{% for pos in posb %}<td></td>{% endfor %}<td class="map">|</td></tr>

	<tr><td class="map">B</td>
		{% for pos in posb %}
			{% if pos %}
				{% if "'B', "|add:pos in mstr %}
						{% if pos == initial_weight or pos >= loss or pos >= 700 %}
							<td class="green">{{ pos }}</td>
						{% endif %}
						{% if 400 <= pos and pos < 700 %}
							<td class="blue">{{ pos }}</td>
						{% endif %}
						{% if 100 <= pos and pos < 400 %}
							<td class="yellow">{{ pos }}</td>
						{% endif %}
						{% if pos < 100 %}
							<td class="red">{{ pos }}</td>
						{% endif %}
				{% else %}
					<td class="gray"></td>
				{% endif %}
			{% else %}
				<td></td>
			{% endif %}
		{% endfor %}
	<td class="map">B</td></tr>

	<tr><td class="map">|</td>{% for pos in posc %}<td></td>{% endfor %}<td class="map">|</td></tr>

	<tr><td class="map">C</td>
		{% for pos in posc %}
			{% if pos %}
				{% if "'C', "|add:pos in mstr %}
						{% if pos == initial_weight or pos >= loss or pos >= 700 %}
							<td class="green">{{ pos }}</td>
						{% endif %}
						{% if 400 <= pos and pos < 700 %}
							<td class="blue">{{ pos }}</td>
						{% endif %}
						{% if 100 <= pos and pos < 400 %}
							<td class="yellow">{{ pos }}</td>
						{% endif %}
						{% if pos < 100 %}
							<td class="red">{{ pos }}</td>
						{% endif %}
				{% else %}
					<td class="gray"></td>
				{% endif %}
			{% else %}
				<td></td>
			{% endif %}
		{% endfor %}
	<td class="map">C</td></tr>

	<tr><td class="map">|</td>{% for pos in posd %}<td></td>{% endfor %}<td class="map">|</td></tr>

	<tr><td class="map">D</td>
		{% for pos in posd %}
			{% if pos %}
				{% if "'D', "|add:pos in mstr %}
						{% if pos == initial_weight or pos >= loss or pos >= 700 %}
							<td class="green">{{ pos }}</td>
						{% endif %}
						{% if 400 <= pos and pos < 700 %}
							<td class="blue">{{ pos }}</td>
						{% endif %}
						{% if 100 <= pos and pos < 400 %}
							<td class="yellow">{{ pos }}</td>
						{% endif %}
						{% if pos < 100 %}
							<td class="red">{{ pos }}</td>
						{% endif %}
				{% else %}
					<td class="gray"></td>
				{% endif %}
			{% else %}
				<td></td>
			{% endif %}
		{% endfor %}
	<td class="map">D</td></tr>

	<tr><td class="map">|</td>{% for pos in pose %}<td></td>{% endfor %}<td class="map">|</td></tr>

	<tr><td class="map">E</td>
		{% for pos in pose %}
			{% if pos %}
				{% if "'E', "|add:pos in mstr %}
						{% if pos == initial_weight or pos >= loss or pos >= 700 %}
							<td class="green">{{ pos }}</td>
						{% endif %}
						{% if 400 <= pos and pos < 700 %}
							<td class="blue">{{ pos }}</td>
						{% endif %}
						{% if 100 <= pos and pos < 400 %}
							<td class="yellow">{{ pos }}</td>
						{% endif %}
						{% if pos < 100 %}
							<td class="red">{{ pos }}</td>
						{% endif %}
				{% else %}
					<td class="gray"></td>
				{% endif %}
			{% else %}
				<td></td>
			{% endif %}
		{% endfor %}
	<td class="map">E</td></tr>

	<tr><td class="map"></td>{% for pos in posall %}<td class="map" width='1%'>{{ pos }}</td>{% endfor %}</tr>
</table>

<!--<table border="1">-->
<!--	<tr><td class="map"></td>{% for pos in position %}<td class="map" width='1%'>{{ pos }}</td>{% endfor %}</tr>-->
<!--	{% for lan in lane %}-->
<!--		{% if lan %}-->
<!--			<tr>-->
<!--				<td class="map" width='1%'>{{ lan }}</td>-->
<!--				{% for pos in position %}-->
<!--					-->
<!--					{% if "('"|add:lan|add:"', '"|add:pos|add:"')" in strlist %}-->
<!--<!--						<td class="gold">{% for size in sizelist %}{{ sizelist|slice:"minus:sizelist|length"|first }}{% endfor %}</td>-->-->
<!--						<td class="gold">{{ lan }}-{{ pos }}</td>-->
<!--					{% else %}-->
<!--						<td class="gray"></td>-->
<!--					{% endif %}-->
<!--					-->
<!--				{% endfor %}-->
<!--				<td class="map" width='1%'>{{ lan }}</td>-->
<!--			</tr>-->
<!--		{% else %}-->
<!--			<tr><td class="map"></td>{% for pos in position %}<td class="map"></td></td>{% endfor %}<td class="map"><br /></td></tr>-->
<!--		{% endif %}-->
<!--	{% endfor %}-->
<!--	<tr><td class="map"></td>{% for pos in position %}<td class="map" width='1%'>{{ pos }}</td>{% endfor %}</tr>-->
<!--</table>-->

</td>
</tr>
<table>

<br />

<!--<table>-->
<!--	<tr>-->
<!--		<th>PAPER CODE</th>-->
<!--		<th>SIZE</th>-->
<!--		<th>ROLL(s)</th>-->
<!--		<th>WEIGHT(kgs.)</th>-->
<!--	</tr>-->
<!--	{% for paper_code, size, rolls, weight in delist %}-->
<!--	<tr>-->
<!--		<td>{{ paper_code }}</td>-->
<!--		<td>{{ size }}</td>-->
<!--		<td>{{ rolls }}</td>-->
<!--		<td>{{ weight }}</td>-->
<!--	</tr>-->
<!--	{% endfor %}-->
<!--</table>-->
</div>
</body>
</html>
